!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).designPattern=e()}(this,function(){"use strict";Function.prototype.beforeFn=function(r){var o=this;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(this,e),o.apply(this,e)}},Function.prototype.afterFn=function(o){var i=this;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=i.apply(this,e);return o.apply(this,e),r}};function t(r,o,i){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("function"!=typeof i||r.apply(this,e)===i.apply(this,e))return"function"!=typeof i&&r.apply(this,e),o.apply(this,e)}}function e(o,i,a){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=i.apply(this,e);if("function"!=typeof a||r===a.apply(this,e))return o.apply(this,e),r}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,n){return(f=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function n(t){var r="function"==typeof Map?new Map:void 0;return(n=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return f(t,arguments,i(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})(t)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e){return t(e={exports:{}},e.exports),e.exports}function y(t){return"object"==typeof t?null!==t:"function"==typeof t}function v(t){if(!y(t))throw TypeError(t+" is not an object!");return t}function g(t){try{return!!t()}catch(t){return!0}}function d(t){return L?j.createElement(t):{}}function m(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function x(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function b(t,e){return F.call(t,e)}function S(t){return"Symbol(".concat(void 0===t?"":t,")_",(++T+I).toString(36))}function w(r,o,t){if(!function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}var O=p(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),E=p(function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)}),k=(E.version,!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),j=O.document,L=y(j)&&y(j.createElement),P=!k&&!g(function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a}),A=Object.defineProperty,_={f:k?Object.defineProperty:function(t,e,n){if(v(t),e=m(e,!0),v(n),P)try{return A(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},M=k?function(t,e,n){return _.f(t,e,x(1,n))}:function(t,e,n){return t[e]=n,t},F={}.hasOwnProperty,T=0,I=Math.random(),N=p(function(t){var e="__core-js_shared__",n=O[e]||(O[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:E.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),R=N("native-function-to-string",Function.toString),C=p(function(t){var i=S("src"),e="toString",a=(""+R).split(e);E.inspectSource=function(t){return R.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(b(n,"name")||M(n,"name",e)),t[e]!==n&&(o&&(b(n,i)||M(n,i,t[e]?""+t[e]:a.join(String(e)))),t===O?t[e]=n:r?t[e]?t[e]=n:M(t,e,n):(delete t[e],M(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||R.call(this)})}),D="prototype",G=function(t,e,n){var r,o,i,a,u=t&G.F,c=t&G.G,s=t&G.S,f=t&G.P,l=t&G.B,h=c?O:s?O[e]||(O[e]={}):(O[e]||{})[D],p=c?E:E[e]||(E[e]={}),y=p[D]||(p[D]={});for(r in c&&(n=e),n)i=((o=!u&&h&&void 0!==h[r])?h:n)[r],a=l&&o?w(i,O):f&&"function"==typeof i?w(Function.call,i):i,h&&C(h,r,i,t&G.U),p[r]!=i&&M(p,r,a),f&&y[r]!=i&&(y[r]=i)};O.core=E,G.F=1,G.G=2,G.S=4,G.P=8,G.B=16,G.W=32,G.U=64,G.R=128;function K(t){return nt.call(t).slice(8,-1)}function V(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function W(t){return Object(V(t))}function z(t){return isNaN(t=+t)?0:(0<t?it:ot)(t)}function Y(t){return 0<t?at(z(t),9007199254740991):0}function q(t,e){return!!t&&g(function(){e?t.call(null,function(){},1):t.call(null)})}var H,J,U,B,Q,X,Z,$,tt,et=G,nt={}.toString,rt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==K(t)?t.split(""):Object(t)},ot=Math.ceil,it=Math.floor,at=Math.min,ut=Array.isArray||function(t){return"Array"==K(t)},ct=p(function(t){var e=N("wks"),n=O.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:S)("Symbol."+t))}).store=e}),st=ct("species"),ft=(U=1==(H=0),B=2==H,Q=3==H,X=4==H,Z=6==H,$=5==H||Z,tt=J||function(t,e){return ut(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!ut(r.prototype)||(r=void 0),y(r)&&null===(r=r[st])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},function(t,e,n){for(var r,o,i=W(t),a=rt(i),u=w(e,n,3),c=Y(a.length),s=0,f=U?tt(t,c):B?tt(t,0):void 0;s<c;s++)if(($||s in a)&&(o=u(r=a[s],s,i),H))if(U)f[s]=o;else if(o)switch(H){case 3:return!0;case 5:return r;case 6:return s;case 2:f.push(r)}else if(X)return!1;return Z?-1:Q||X?X:f}),lt=q([].forEach,!0);et(et.P+et.F*!lt,"Array",{forEach:function(t,e){return ft(this,t,e)}}),et(et.S,"Array",{isArray:ut});function ht(){var t=v(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var pt=function(){function e(t){if(a(this,e),"function"!=typeof t)throw new Error("fn must be a function");this.fn=t,this.next=null}return s(e,[{key:"setNext",value:function(t){return this.next=t}},{key:"passRequest",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=this.fn.apply(null,e.slice(1));return console.log(r,e,o,this.next),o===r?this.next&&this.next.passRequest.apply(this.next,e):o}}]),e}(),yt=function(){function o(t){a(this,o),this.nextKey=t,this.head=null;for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.fns=Array.isArray(n)?n:[n],this.initChains(this.fns.slice()),this.length=n.length}return s(o,[{key:"initChains",value:function(t){this.head=new pt(t.shift());var r=this.head;t.forEach(function(t,e,n){r=r.setNext(new pt(t))})}},{key:"start",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.unshift(this.nextKey),0!==this.length)return this.head.passRequest.apply(this.head,e)}},{key:"clear",value:function(){this.head=null,this.length=0,this.fns=[]}},{key:"set",value:function(t,e){var n;e=Array.isArray(e)?e:[e];var r=this.head;if(!r)return!1;var o=this.length?this.length-1:0;o=0<t?Math.min(t+1,o):Math.max(o+t+1,0);for(var i=this.fns.slice(o,e.length),a=0;a<o;a++){if(!r)return!1;r=r.next}return e.forEach(function(t){r=r.setNext(new pt(t))}),i.forEach(function(t){r=r.setNext(new pt(t))}),(n=this.fns).splice.apply(n,[o,0].concat(h(e))),!0}}]),o}();k&&"g"!=/./g.flags&&_.f(RegExp.prototype,"flags",{configurable:!0,get:ht});function vt(t){C(RegExp.prototype,gt,t,!0)}var gt="toString",dt=/./[gt];g(function(){return"/a/b"!=dt.call({source:"a",flags:"b"})})?vt(function(){var t=v(this);return"/".concat(t.source,"/","flags"in t?t.flags:!k&&t instanceof RegExp?ht.call(t):void 0)}):dt.name!=gt&&vt(function(){return dt.call(this)});var mt=Date.prototype,bt="Invalid Date",St="toString",wt=mt[St],xt=mt.getTime;new Date(NaN)+""!=bt&&C(mt,St,function(){var t=xt.call(this);return t==t?wt.call(this):bt});var Ot=ct("toStringTag"),Et="Arguments"==K(function(){return arguments}()),kt={};kt[ct("toStringTag")]="z",kt+""!="[object z]"&&C(Object.prototype,"toString",function(){return"[object "+(void 0===(t=this)?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ot))?n:Et?K(e):"Object"==(r=K(e))&&"function"==typeof e.callee?"Arguments":r)+"]";var t,e,n,r},!0);var jt,Lt=(jt={},{add:function(t,e){for(var n=arguments.length,r=new Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];jt[t]=e.apply(void 0,r)},setExternalState:function(t,e){var n=jt[t];for(var r in n)Object.prototype.toString.call(n,r)&&(e[r]=n[r]);return e}}),Pt=_.f,At=Function.prototype,_t=/^\s*function ([^ (]*)/;"name"in At||k&&Pt(At,"name",{configurable:!0,get:function(){try{return(""+this).match(_t)[1]}catch(t){return""}}});function Mt(t){return rt(V(t))}function Ft(s){return function(t,e,n){var r,o,i,a=Mt(t),u=Y(a.length),c=(o=u,(r=z(r=n))<0?Tt(r+o,0):It(r,o));if(s&&e!=e){for(;c<u;)if((i=a[c++])!=i)return!0}else for(;c<u;c++)if((s||c in a)&&a[c]===e)return s||c||0;return!s&&-1}}var Tt=Math.max,It=Math.min,Nt=Ft(!1),Rt=[].indexOf,Ct=!!Rt&&1/[1].indexOf(1,-0)<0;et(et.P+et.F*(Ct||!q(Rt)),"Array",{indexOf:function(t,e){return Ct?Rt.apply(this,arguments)||0:Nt(this,t,e)}});function Dt(t){var e=E.Symbol||(E.Symbol=O.Symbol||{});"_"==t.charAt(0)||t in e||Kt(e,t,{value:Gt.f(t)})}var Gt={f:ct},Kt=_.f;Dt("asyncIterator");function Vt(t,e,n){t&&!b(t=n?t:t.prototype,$t)&&Zt(t,$t,{configurable:!0,value:e})}function Wt(t){return te[t]||(te[t]=S(t))}function zt(t,e){var n,r=Mt(t),o=0,i=[];for(n in r)n!=ne&&b(r,n)&&i.push(n);for(;e.length>o;)b(r,n=e[o++])&&(~ee(i,n)||i.push(n));return i}function Yt(){}function qt(t){var e=Ie[t]=pe(je[Ae]);return e._k=t,e}function Ht(t,e){v(t);for(var n,r=function(t){var e=oe(t),n=ie.f;if(n)for(var r,o=n(t),i=ae.f,a=0;o.length>a;)i.call(t,r=o[a++])&&e.push(r);return e}(e=Mt(e)),o=0,i=r.length;o<i;)We(t,n=r[o++],e[n]);return t}function Jt(t){var e=Fe.call(this,t=m(t,!0));return!(this===Re&&b(Ie,t)&&!b(Ne,t))&&(!(e||!b(this,t)||!b(Ie,t)||b(this,_e)&&this[_e][t])||e)}function Ut(t,e){if(t=Mt(t),e=m(e,!0),t!==Re||!b(Ie,e)||b(Ne,e)){var n=Oe(t,e);return!n||!b(Ie,e)||b(t,_e)&&t[_e][e]||(n.enumerable=!0),n}}function Bt(t){for(var e,n=ke(Mt(t)),r=[],o=0;n.length>o;)b(Ie,e=n[o++])||e==_e||e==xe||r.push(e);return r}function Qt(t){for(var e,n=t===Re,r=ke(n?Ne:Mt(t)),o=[],i=0;r.length>i;)!b(Ie,e=r[i++])||n&&!b(Re,e)||o.push(Ie[e]);return o}var Xt=p(function(t){function n(t){e(t,r,{value:{i:"O"+ ++o,w:{}}})}var r=S("meta"),e=_.f,o=0,i=Object.isExtensible||function(){return!0},a=!g(function(){return i(Object.preventExtensions({}))}),u=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!b(t,r)){if(!i(t))return"F";if(!e)return"E";n(t)}return t[r].i},getWeak:function(t,e){if(!b(t,r)){if(!i(t))return!0;if(!e)return!1;n(t)}return t[r].w},onFreeze:function(t){return a&&u.NEED&&i(t)&&!b(t,r)&&n(t),t}}}),Zt=(Xt.KEY,Xt.NEED,Xt.fastKey,Xt.getWeak,Xt.onFreeze,_.f),$t=ct("toStringTag"),te=N("keys"),ee=Ft(!1),ne=Wt("IE_PROTO"),re="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),oe=Object.keys||function(t){return zt(t,re)},ie={f:Object.getOwnPropertySymbols},ae={f:{}.propertyIsEnumerable},ue=k?Object.defineProperties:function(t,e){v(t);for(var n,r=oe(e),o=r.length,i=0;i<o;)_.f(t,n=r[i++],e[n]);return t},ce=O.document,se=ce&&ce.documentElement,fe=Wt("IE_PROTO"),le="prototype",he=function(){var t,e=d("iframe"),n=re.length;for(e.style.display="none",se.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),he=t.F;n--;)delete he[le][re[n]];return he()},pe=Object.create||function(t,e){var n;return null!==t?(Yt[le]=v(t),n=new Yt,Yt[le]=null,n[fe]=t):n=he(),void 0===e?n:ue(n,e)},ye=re.concat("length","prototype"),ve={f:Object.getOwnPropertyNames||function(t){return zt(t,ye)}},ge=ve.f,de={}.toString,me="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],be={f:function(t){return me&&"[object Window]"==de.call(t)?function(t){try{return ge(t)}catch(t){return me.slice()}}(t):ge(Mt(t))}},Se=Object.getOwnPropertyDescriptor,we={f:k?Se:function(t,e){if(t=Mt(t),e=m(e,!0),P)try{return Se(t,e)}catch(t){}if(b(t,e))return x(!ae.f.call(t,e),t[e])}},xe=Xt.KEY,Oe=we.f,Ee=_.f,ke=be.f,je=O.Symbol,Le=O.JSON,Pe=Le&&Le.stringify,Ae="prototype",_e=ct("_hidden"),Me=ct("toPrimitive"),Fe={}.propertyIsEnumerable,Te=N("symbol-registry"),Ie=N("symbols"),Ne=N("op-symbols"),Re=Object[Ae],Ce="function"==typeof je&&!!ie.f,De=O.QObject,Ge=!De||!De[Ae]||!De[Ae].findChild,Ke=k&&g(function(){return 7!=pe(Ee({},"a",{get:function(){return Ee(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Oe(Re,e);r&&delete Re[e],Ee(t,e,n),r&&t!==Re&&Ee(Re,e,r)}:Ee,Ve=Ce&&"symbol"==typeof je.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof je},We=function(t,e,n){return t===Re&&We(Ne,e,n),v(t),e=m(e,!0),v(n),b(Ie,e)?(n.enumerable?(b(t,_e)&&t[_e][e]&&(t[_e][e]=!1),n=pe(n,{enumerable:x(0,!1)})):(b(t,_e)||Ee(t,_e,x(1,{})),t[_e][e]=!0),Ke(t,e,n)):Ee(t,e,n)};Ce||(C((je=function(t){if(this instanceof je)throw TypeError("Symbol is not a constructor!");var e=S(0<arguments.length?t:void 0),n=function(t){this===Re&&n.call(Ne,t),b(this,_e)&&b(this[_e],e)&&(this[_e][e]=!1),Ke(this,e,x(1,t))};return k&&Ge&&Ke(Re,e,{configurable:!0,set:n}),qt(e)})[Ae],"toString",function(){return this._k}),we.f=Ut,_.f=We,ve.f=be.f=Bt,ae.f=Jt,ie.f=Qt,k&&C(Re,"propertyIsEnumerable",Jt,!0),Gt.f=function(t){return qt(ct(t))}),et(et.G+et.W+et.F*!Ce,{Symbol:je});for(var ze="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ye=0;ze.length>Ye;)ct(ze[Ye++]);for(var qe=oe(ct.store),He=0;qe.length>He;)Dt(qe[He++]);et(et.S+et.F*!Ce,"Symbol",{for:function(t){return b(Te,t+="")?Te[t]:Te[t]=je(t)},keyFor:function(t){if(!Ve(t))throw TypeError(t+" is not a symbol!");for(var e in Te)if(Te[e]===t)return e},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),et(et.S+et.F*!Ce,"Object",{create:function(t,e){return void 0===e?pe(t):Ht(pe(t),e)},defineProperty:We,defineProperties:Ht,getOwnPropertyDescriptor:Ut,getOwnPropertyNames:Bt,getOwnPropertySymbols:Qt});var Je=g(function(){ie.f(1)});et(et.S+et.F*Je,"Object",{getOwnPropertySymbols:function(t){return ie.f(W(t))}}),Le&&et(et.S+et.F*(!Ce||g(function(){var t=je();return"[null]"!=Pe([t])||"{}"!=Pe({a:t})||"{}"!=Pe(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if(n=e=r[1],(y(e)||void 0!==t)&&!Ve(t))return ut(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ve(e))return e}),r[1]=e,Pe.apply(Le,r)}}),je[Ae][Me]||M(je[Ae],Me,je[Ae].valueOf),Vt(je,"Symbol"),Vt(Math,"Math",!0),Vt(O.JSON,"JSON",!0);var Ue=ct("unscopables"),Be=Array.prototype;null==Be[Ue]&&M(Be,Ue,{});function Qe(t){Be[Ue][t]=!0}function Xe(t,e){return{value:e,done:!!t}}var Ze={},$e={};M($e,ct("iterator"),function(){return this});function tn(){return this}var en=Wt("IE_PROTO"),nn=Object.prototype,rn=Object.getPrototypeOf||function(t){return t=W(t),b(t,en)?t[en]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?nn:null},on=ct("iterator"),an=!([].keys&&"next"in[].keys()),un="values",cn=function(t,e,n,r,o,i,a){var u,c,s;c=e,s=r,(u=n).prototype=pe($e,{next:x(1,s)}),Vt(u,c+" Iterator");function f(t){if(!an&&t in d)return d[t];switch(t){case"keys":case un:return function(){return new n(this,t)}}return function(){return new n(this,t)}}var l,h,p,y=e+" Iterator",v=o==un,g=!1,d=t.prototype,m=d[on]||d["@@iterator"]||o&&d[o],b=m||f(o),S=o?v?f("entries"):b:void 0,w="Array"==e&&d.entries||m;if(w&&(p=rn(w.call(new t)))!==Object.prototype&&p.next&&(Vt(p,y,!0),"function"!=typeof p[on]&&M(p,on,tn)),v&&m&&m.name!==un&&(g=!0,b=function(){return m.call(this)}),!an&&!g&&d[on]||M(d,on,b),Ze[e]=b,Ze[y]=tn,o)if(l={values:v?b:f(un),keys:i?b:f("keys"),entries:S},a)for(h in l)h in d||C(d,h,l[h]);else et(et.P+et.F*(an||g),e,l);return l}(Array,"Array",function(t,e){this._t=Mt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Xe(1)):Xe(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Ze.Arguments=Ze.Array,Qe("keys"),Qe("values"),Qe("entries");for(var sn=ct("iterator"),fn=ct("toStringTag"),ln=Ze.Array,hn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},pn=oe(hn),yn=0;yn<pn.length;yn++){var vn,gn=pn[yn],dn=hn[gn],mn=O[gn],bn=mn&&mn.prototype;if(bn&&(bn[sn]||M(bn,sn,ln),bn[fn]||M(bn,fn,gn),Ze[gn]=ln,dn))for(vn in cn)bn[vn]||C(bn,vn,cn[vn],!0)}p(function(t){var e=function(a){var c,t=Object.prototype,f=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function u(t,e,n,r){var i,a,u,c,o=e&&e.prototype instanceof d?e:d,s=Object.create(o.prototype),f=new L(r||[]);return s._invoke=(i=t,a=n,u=f,c=h,function(t,e){if(c===y)throw new Error("Generator is already running");if(c===v){if("throw"===t)throw e;return A()}for(u.method=t,u.arg=e;;){var n=u.delegate;if(n){var r=E(n,u);if(r){if(r===g)continue;return r}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===h)throw c=v,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=y;var o=l(i,a,u);if("normal"===o.type){if(c=u.done?v:p,o.arg===g)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c=v,u.method="throw",u.arg=o.arg)}}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",g={};function d(){}function i(){}function s(){}var m={};m[o]=function(){return this};var b=Object.getPrototypeOf,S=b&&b(b(P([])));S&&S!==t&&f.call(S,o)&&(m=S);var w=s.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(c,s){var e;this._invoke=function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,o){var i=l(c[t],c,n);if("throw"!==i.type){var a=i.arg,u=a.value;return u&&"object"==typeof u&&f.call(u,"__await")?s.resolve(u.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):s.resolve(u).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}o(i.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function E(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,E(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(f.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:c,done:!0}}return i.prototype=w.constructor=s,s.constructor=i,s[r]=i.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(w),t},a.awrap=function(t){return{__await:t}},x(O.prototype),O.prototype[n]=function(){return this},a.AsyncIterator=O,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new O(u(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(w),w[r]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&f.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=f.call(o,"catchLoc"),u=f.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&f.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),g}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}});var Sn=function(){function e(t){a(this,e),this.events={},this.listenersLength=0,this.maxListeners=e.defaultMaxListeners,this.maxEvents=e.defaultMaxEvents,this.isOnOfflineStack=t||!1,this.offlineStack={}}var u,n;return s(e,[{key:"addEventListener",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.on.apply(this,e)}},{key:"setMaxListeners",value:function(t){t=o(t=t!=t?1:t)===number?t:1,this.maxListeners=t||1}},{key:"emit",value:(u=regeneratorRuntime.mark(function t(e){var n,r,o,i,a,u,c,s,f,l,h=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=this.events[e],r=h.length,o=new Array(1<r?r-1:0),i=1;i<r;i++)o[i-1]=h[i];if(!(n&&0<n.length)){t.next=32;break}u=!(a=!0),c=void 0,t.prev=6,s=n[Symbol.iterator]();case 8:if(a=(f=s.next()).done){t.next=16;break}if("function"==typeof(l=f.value))return t.next=13,l.apply(this,o);t.next=13;break;case 13:a=!0,t.next=8;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(6),u=!0,c=t.t0;case 22:t.prev=22,t.prev=23,a||null==s.return||s.return();case 25:if(t.prev=25,u)throw c;t.next=28;break;case 28:return t.finish(25);case 29:return t.finish(22);case 30:t.next=34;break;case 32:return this.isOnOfflineStack&&(this.offlineStack[e]=this.offlineStack[e]||[],this.offlineStack[e].push(o)),t.abrupt("return",!1);case 34:case"end":return t.stop()}},t,this,[[6,18,22,30],[23,,25,29]])}),n=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=u.apply(t,a);function o(t){c(r,e,n,o,i,"next",t)}function i(t){c(r,e,n,o,i,"throw",t)}o(void 0)})},function(t){return n.apply(this,arguments)})},{key:"eventNames",value:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var o,i=this.events[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;t.push(a)}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"listenerCount",value:function(t){return this.events[t]?this.events[t].length:0}},{key:"listeners",value:function(t){return this.events[t]?this.events[t].slice(0):[]}},{key:"off",value:function(t,e){if(!Object.prototype.hasOwnProperty.call(this.events,t))return!1;if("function"==typeof e){var n=this.events[t].indexOf(e);return-1!==n&&(this.events[t].splice(n,1),!0)}void 0===e&&(this.events[t]=[])}},{key:"on",value:function(t,e){var n=this;if(t=String(t),Object.prototype.hasOwnProperty.call(this.events,t)){if(this.listenersLength>=this.maxListeners)return void console.error("超出监听数量限制")}else this.events[t]=[],this.listenersLength++;this.events[t].length>=this.maxEvents?console.error("超出监听事件数量限制"):(this.events[t].push(e),this.isOnOfflineStack&&this.offlineStack[t]&&(this.offlineStack[t].forEach(function(t){e.apply(n,t)}),this.offlineStack[t]=[]))}},{key:"once",value:function(t,o){var e=this;if(t=String(t),Object.prototype.hasOwnProperty.call(this.events,t)){if(this.listenersLength>=this.maxListeners)return void console.error("超出监听数量限制")}else this.events[t]=[],this.listenersLength++;if(this.events[t].length>=this.maxEvents)console.error("超出监听事件数量限制");else{var n=function(){if(o){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=o.apply(this,e);return o=null,r}};this.events[t].push(n),this.isOnOfflineStack&&this.offlineStack[t]&&(this.offlineStack[t].forEach(function(t){n.apply(e,t)}),this.offlineStack[t]=[])}}},{key:"removeListener",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.off.apply(this,e)}},{key:"removeAllListeners",value:function(t){return this.off.apply(this,arguments.length<=0?void 0:t)}}]),e}();Sn.defaultMaxListeners=100,Sn.defaultMaxEvents=100;var wn=function(){function e(t){a(this,e),this.fn=t,this.instance=null}return s(e,[{key:"getInstance",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.instance||(this.instance=this.fn.apply(this,e))}}]),e}();function xn(t,e){var n,r=o(e);return Object.prototype.toString.call(t)==="[object ".concat("string"===r?(n=e).length<=2?"String":n.substring(0,1).toUpperCase().concat(n.substring(1).toLowerCase()):r,"]")}et(et.S,"Object",{create:pe});var On=function(){function r(t,e){var n;return a(this,r),(n=l(this,i(r).call(this,t))).type=e,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,n(Error)),s(r,[{key:"toString",value:function(){return"type: ".concat(this.type,"; message: ").concat(this.message)}}]),r}();function En(t,e){for(var n in t)r=t,o=n,Object.prototype.hasOwnProperty.call(r,o)&&(e[n]=t[n]);var r,o;t.nextState&&(e.nextState=t.nextState),e.prototype=Object.create(t.prototype),e.prototype.constructor=e}function kn(r,o){function t(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(this,e),En(o,r),o.apply(this,e)}return En(o,t),o.nextState,r.nextState,t}return{beforeFunction:t,afterFunction:e,before:t,after:e,DutyChains:yt,FlyWeight:Lt,Mediator:function(e){var o={};return"[object Object]"===Object.prototype.toString.call(e)?o=e:Array.isArray(e)&&e.forEach(function(t){console.log(e,t),"function"==typeof t&&(o[t.name]=t)}),{receiverMessage:function(t){if("function"==typeof o[t]){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o[t].apply(this,n)}},mediatorOperations:o}},PublishSubscribe:Sn,Single:wn,State:function(){function i(t){var e=t.fns,n=void 0===e?[]:e,r=t.keyMethod,o=void 0===r?[]:r;a(this,i),this.states=[],this.classes=n.slice(0),this.length=this.classes.length,this.noop=Object.create(null),this.keyMethod=o,this.currentState=null,this.currentStateIndex=0,this.stateIndexMap={},this.initState()}return s(i,[{key:"initState",value:function(){var i=this;if(0!==this.length){var o=this;this.classes.forEach(function(t,e){if(xn(t,"object")){var n=kn(function(t){this.state=t},t.fn);i.states[e]={instance:new n(o),state:t.state,nextState:t.nextState},t.state&&(i.stateIndexMap[t.state]={state:i.states[e],index:e})}else{if(!xn(t,"function"))throw new On("fns cannot without function","parameterError");var r=kn(function(t){this.state=t},t);i.states[e]={instance:new r(o),state:t.state||t.name,nextState:t.nextState},(t.state||t.name)&&(i.stateIndexMap[t.state||t.name]={state:i.states[e],index:e})}});var a=this.keyMethod;this.states.forEach(function(n){var r=n.instance,o=i;if(0===a.length){var t=function(e){if("function"==typeof r[e]&&r[e].nextState){r[e],r[e].nextState;var t=r[e].nextState;r[e]=kn(r[e],function(){var t=o.stateIndexMap[r[e].nextState];t=t||o.stateIndexMap[n.nextState],r[e],r[e].nextState,t?(this.state.setState(t.state),o.currentStateIndex=t.index):this.state.setState(o.states[++o.currentStateIndex%o.length])}),r[e].nextState=t}};for(var e in r)t(e)}else a.forEach(function(e){"function"==typeof r[e]&&r[e].nextState&&(r[e]=kn(r[e],function(){var t=o.stateIndexMap[r[e].nextState];(t=t||o.stateIndexMap[n.nextState])?(this.state.setState(t[n]),o.currentStateIndex=t.index):this.state.setState(o.states[++o.currentStateIndex%o.length])}))})}),this.currentStateIndex=0,this.length=this.classes.length,this.setState(this.states[this.currentStateIndex])}else this.states[0]=this.noop}},{key:"setState",value:function(t){this.currentState=t}}]),i}()}});
